
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#bitmax-api-documentation-v2" class="toc-h1 toc-link" data-title="BitMax API Documentation V2">BitMax API Documentation V2</a>
          </li>
          <li>
            <a href="#restful-apis-public" class="toc-h1 toc-link" data-title="RESTful APIs - Public">RESTful APIs - Public</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-market-trades" class="toc-h2 toc-link" data-title="Get Market Trades">Get Market Trades</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#creating-a-request" class="toc-h2 toc-link" data-title="Creating a Request">Creating a Request</a>
                  </li>
                  <li>
                    <a href="#signing-a-request" class="toc-h2 toc-link" data-title="Signing a Request">Signing a Request</a>
                  </li>
                  <li>
                    <a href="#error-code" class="toc-h2 toc-link" data-title="Error Code">Error Code</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#restful-apis-wallet-deposit-and-withdraw" class="toc-h1 toc-link" data-title="RESTful APIs - Wallet(Deposit and Withdraw)">RESTful APIs - Wallet(Deposit and Withdraw)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-deposit-address-of-one-asset" class="toc-h2 toc-link" data-title="Get Deposit address of one Asset">Get Deposit address of one Asset</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#restful-apis-margin-trading" class="toc-h1 toc-link" data-title="RESTful APIs - Margin Trading">RESTful APIs - Margin Trading</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-balance-of-one-asset-of-the-margin-account" class="toc-h2 toc-link" data-title="Get Balance of one Asset of the Margin Account">Get Balance of one Asset of the Margin Account</a>
                  </li>
                  <li>
                    <a href="#list-all-balance-of-the-margin-account" class="toc-h2 toc-link" data-title="List all Balance of the Margin Account">List all Balance of the Margin Account</a>
                  </li>
                  <li>
                    <a href="#get-risk-summary-of-one-symbol-of-the-margin-account" class="toc-h2 toc-link" data-title="Get Risk(Summary) of one Symbol of the Margin Account">Get Risk(Summary) of one Symbol of the Margin Account</a>
                  </li>
                  <li>
                    <a href="#transfer-asset-from-cash-account-to-margin-account" class="toc-h2 toc-link" data-title="Transfer Asset from Cash Account to Margin Account">Transfer Asset from Cash Account to Margin Account</a>
                  </li>
                  <li>
                    <a href="#transfer-asset-from-margin-account-to-cash-account" class="toc-h2 toc-link" data-title="Transfer Asset from Margin Account to Cash Account">Transfer Asset from Margin Account to Cash Account</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#websocket-api-beta-version" class="toc-h1 toc-link" data-title="WebSocket API (Beta Version)">WebSocket API (Beta Version)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#websocket-data-feed" class="toc-h2 toc-link" data-title="WebSocket Data Feed">WebSocket Data Feed</a>
                  </li>
                  <li>
                    <a href="#websocket-for-cash-trading" class="toc-h2 toc-link" data-title="WebSocket for Cash Trading">WebSocket for Cash Trading</a>
                  </li>
                  <li>
                    <a href="#websocket-for-margin-trading" class="toc-h2 toc-link" data-title="WebSocket for Margin Trading">WebSocket for Margin Trading</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#error-codes" class="toc-h1 toc-link" data-title="Error Codes">Error Codes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#faq" class="toc-h2 toc-link" data-title="FAQ">FAQ</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://bitmax.io'>BitMax.io</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='bitmax-api-documentation-v2'>BitMax API Documentation V2</h1>
<p>This document contains new <code>v2</code> APIs with improved features. At the moment, only limited functionality is supported. However, we plan
to increase coverage extensively. </p>

<p>Meanwhile, please refer to <a href="https://github.com/bitmax-exchange/api-doc">BitMax | API Document</a> for a more complete set of APIs. </p>

<aside class="warning">Please note that this document contains beta APIs subject to further changes.</aside>
<h1 id='restful-apis-public'>RESTful APIs - Public</h1><h2 id='get-market-trades'>Get Market Trades</h2>
<blockquote>
<p>Response example (symbol=BTC/USDT, n=2) </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"marketTrades"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"s"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
     </span><span class="s2">"bm"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
     </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">72057594043333564</span><span class="p">,</span><span class="w">
     </span><span class="s2">"p"</span><span class="p">:</span><span class="w">  </span><span class="s2">"11406.35"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"q"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.0305710"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"t"</span><span class="p">:</span><span class="w">  </span><span class="mi">1565646523666</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
     </span><span class="s2">"bm"</span><span class="p">:</span><span class="w"> </span><span class="err">True</span><span class="p">,</span><span class="w">
     </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">72057594043333566</span><span class="p">,</span><span class="w">
     </span><span class="s2">"p"</span><span class="p">:</span><span class="w">  </span><span class="s2">"11406.00"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"q"</span><span class="p">:</span><span class="w">  </span><span class="s2">"1.4226290"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"t"</span><span class="p">:</span><span class="w">  </span><span class="mi">1565646523666</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>HTTP Request</strong></p>

<p><code>GET api/v2/trades/symbol=&lt;symbol&gt;&amp;n=&lt;n&gt;</code></p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>String</td>
<td>a valid smbol, e.g. <code>symbol=ETH-BTC</code></td>
</tr>
<tr>
<td>n</td>
<td>Int</td>
<td>number of trades to be included in the response. n is currently limited to 100 or fewer. e.g. <code>n=10</code></td>
</tr>
</tbody></table>

<p>Each element in <code>trades</code> is an object containing recent trade data with the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>bm</code></td>
<td>Boolean</td>
<td>if <code>true</code>, the buyer of the trade is the market maker</td>
</tr>
<tr>
<td><code>id</code></td>
<td>Long</td>
<td>Unique ID of the market trade</td>
</tr>
<tr>
<td><code>p</code></td>
<td>String</td>
<td>price</td>
</tr>
<tr>
<td><code>q</code></td>
<td>String</td>
<td>quantity</td>
</tr>
<tr>
<td><code>t</code></td>
<td>Long</td>
<td>timestamp</td>
</tr>
</tbody></table>
<h1 id='authentication'>Authentication</h1>
<p>The authentication process for <code>v2</code> APIs are a bit different from the old version:</p>

<ul>
<li>We now enforce strong timestamp check.</li>
<li>The response of the API call is more informative in case of authentication failure. </li>
</ul>
<h2 id='creating-a-request'>Creating a Request</h2>
<p>To access private data, you must include the following headers:</p>

<ul>
<li><code>x-auth-key</code> - required, the api key as a string. </li>
<li><code>x-auth-timestamp</code> - required, the UTC timestamp in milliseconds of your request</li>
<li><code>x-auth-signature</code> - required, the request signature (see #signing-a-request)</li>
<li><code>x-auth-coid</code> - the request Id, only required certain APIs (such as placing/canceling orders)</li>
</ul>
<h2 id='signing-a-request'>Signing a Request</h2>
<blockquote>
<p>Signing a request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># bash </span>
<span class="nv">APIPATH</span><span class="o">=</span>user/info
<span class="nv">APIKEY</span><span class="o">=</span>CEcrjGyipqt0OflgdQQSRGdrDXdDUY2x
<span class="nv">SECRET</span><span class="o">=</span>hV8FgjyJtpvVeAcMAgzgAFQCN36wmbWuN7o3WPcYcYhFd8qvE43gzFGVsFcCqMNk
<span class="nv">TIMESTAMP</span><span class="o">=</span><span class="sb">`</span>date +%s%N | cut -c -13<span class="sb">`</span> <span class="c"># 1562952827927</span>
<span class="nv">MESSAGE</span><span class="o">=</span><span class="nv">$TIMESTAMP</span>+<span class="nv">$APIPATH</span>
<span class="nv">SIGNATURE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> -n <span class="nv">$MESSAGE</span> | openssl dgst -sha256 -hmac <span class="nv">$SECRET</span> -binary | base64<span class="sb">`</span>
<span class="nb">echo</span> <span class="nv">$SIGNATURE</span>  <span class="c"># vBZf8OQuiTJIVbNpNHGY3zcUsK5gJpwb5lgCgarpxYI=</span>

curl -X GET -i <span class="se">\</span>
  -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"x-auth-key: </span><span class="nv">$APIKEY</span><span class="s2">"</span> <span class="se">\</span>
  -H <span class="s2">"x-auth-signature: </span><span class="nv">$SIGNATURE</span><span class="s2">"</span> <span class="se">\</span>
  -H <span class="s2">"x-auth-timestamp: </span><span class="nv">$TIMESTAMP</span><span class="s2">"</span> <span class="se">\</span>
  https://bitmax.io/api/v1/user/info
</code></pre><pre class="highlight python tab-python"><code><span class="c"># python 3.6+</span>
<span class="kn">import</span> <span class="nn">time</span><span class="p">,</span> <span class="n">hmac</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">,</span> <span class="n">base64</span>

<span class="n">api_path</span>  <span class="o">=</span> <span class="s">"user/info"</span>
<span class="n">api_key</span>   <span class="o">=</span> <span class="s">"CEcrjGyipqt0OflgdQQSRGdrDXdDUY2x"</span>
<span class="n">sec_key</span>   <span class="o">=</span> <span class="s">"hV8FgjyJtpvVeAcMAgzgAFQCN36wmbWuN7o3WPcYcYhFd8qvE43gzFGVsFcCqMNk"</span>
<span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1e3</span><span class="p">))</span> <span class="c"># 1562952827927</span>

<span class="n">message</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">f</span><span class="s">"{timestamp}+{api_path}"</span><span class="p">,</span> <span class="s">'utf-8'</span><span class="p">)</span>
<span class="n">secret</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">sec_key</span><span class="p">,</span> <span class="s">'utf-8'</span><span class="p">)</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">secret</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">digestmod</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha256</span><span class="p">)</span><span class="o">.</span><span class="n">digest</span><span class="p">())</span>

<span class="n">header</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"x-auth-key"</span><span class="p">:</span> <span class="n">api_key</span><span class="p">,</span>
  <span class="s">"x-auth-signature"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span> 
  <span class="s">"x-auth-timestamp"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
<span class="p">}</span>
<span class="k">print</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>  <span class="c"># b'vBZf8OQuiTJIVbNpNHGY3zcUsK5gJpwb5lgCgarpxYI='</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.codec.binary.Base64</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SignatureExample</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="kt">long</span> <span class="n">timestamp</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span> <span class="c1">// 1562952827927</span>
      <span class="n">String</span> <span class="n">api_path</span> <span class="o">=</span> <span class="s">"user/info"</span><span class="o">;</span>
      <span class="n">String</span> <span class="n">secret</span> <span class="o">=</span> <span class="s">"hV8FgjyJtpvVeAcMAgzgAFQCN36wmbWuN7o3WPcYcYhFd8qvE43gzFGVsFcCqMNk"</span><span class="o">;</span>
      <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">timestamp</span> <span class="o">+</span> <span class="s">"+"</span> <span class="o">+</span> <span class="n">api_path</span><span class="o">;</span>

      <span class="n">Mac</span> <span class="n">sha256_HMAC</span> <span class="o">=</span> <span class="n">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA256"</span><span class="o">);</span>
      <span class="n">SecretKeySpec</span> <span class="n">secret_key</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SecretKeySpec</span><span class="o">(</span><span class="n">secret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(),</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
      <span class="n">sha256_HMAC</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secret_key</span><span class="o">);</span>

      <span class="n">String</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">Base64</span><span class="o">.</span><span class="na">encodeBase64String</span><span class="o">(</span><span class="n">sha256_HMAC</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">message</span><span class="o">.</span><span class="na">getBytes</span><span class="o">()));</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hash</span><span class="o">);</span> <span class="c1">// vBZf8OQuiTJIVbNpNHGY3zcUsK5gJpwb5lgCgarpxYI=</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error"</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>To query APIs with private data, you must include a signature using base64 encoded HMAC sha256 algorithm.</p>
<h2 id='error-code'>Error Code</h2>
<blockquote>
<p>Example: HTTP response when authentication failed</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//</span><span class="w"> </span><span class="err">HTTP</span><span class="w"> </span><span class="err">Response</span><span class="w"> </span><span class="err">Status</span><span class="w"> </span><span class="err">Code</span><span class="p">:</span><span class="w"> </span><span class="mi">405</span><span class="w"> </span><span class="err">-</span><span class="w"> </span><span class="err">Method</span><span class="w"> </span><span class="err">Not</span><span class="w"> </span><span class="err">Allowed</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w">  </span><span class="mi">21001</span><span class="p">,</span><span class="w">
  </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">,</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If authentication failed, the server will response with <code>status code</code> other than <code>200 OK</code>. The respond body will contain more details including
the <code>code</code> field with value other than <code>0</code> and a <code>message</code> field with text explaining why the authentication failed. </p>

<p>The table below lists all possible server responses if the request is rejected due to authentication failure. </p>

<table><thead>
<tr>
<th>HTTP Status Code</th>
<th>ErrorCode</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>405 Method Not Allowed</td>
<td>21001</td>
<td>API Access is currently disabled.</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>21002</td>
<td>API header is missing.</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>21003</td>
<td>Request ID Mismatch.</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>21004</td>
<td>API request header error: invalid timestamp. This typically means the timestamp in request header differs from system time by more than 60 seconds.</td>
</tr>
<tr>
<td>400 Bad Request</td>
<td>21006</td>
<td>Unable to find API key.</td>
</tr>
<tr>
<td>410 Gone</td>
<td>21005</td>
<td>Unable to verify API signature: expired timestamp.</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>21007</td>
<td>API key does not have view permission.</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>21010</td>
<td>API key does not have withdraw permission.</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>21009</td>
<td>API key does not have trade permission.</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>21008</td>
<td>API key does not have transfer permission.</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>2012</td>
<td>Account group mismatch.</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>21011</td>
<td>Unable to verify API signature: signature mismatch.</td>
</tr>
</tbody></table>
<h1 id='restful-apis-wallet-deposit-and-withdraw'>RESTful APIs - Wallet(Deposit and Withdraw)</h1><h2 id='get-deposit-address-of-one-asset'>Get Deposit address of one Asset</h2>
<blockquote>
<p>Response example (asset = USDT which has two blockchains) </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
     </span><span class="s2">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"blockChain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Omni"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"addressData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17nbKg26jBStZHmdq9jLETHPh8EzjiaQ9J"</span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
     </span><span class="s2">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"blockChain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ERC20"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"addressData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x7dcf0192e4a78593fd360dbc2fa50855a3f4505a"</span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx@xxx.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">submitted</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">server</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response example (asset = XRP which requires both Tag and deposit address for deposit) </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
     </span><span class="s2">"asset"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"blockChain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ripple"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"addressData"</span><span class="p">:</span><span class="w"> 
         </span><span class="p">{</span><span class="w">
         </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rpinhtY4p35bPmVXPbfWRUtZ1w1K1gYShB"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"destTag"</span><span class="p">:</span><span class="w"> </span><span class="s2">"54301"</span><span class="w">
         </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx@xxx.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">submitted</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">server</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>HTTP Request</strong></p>

<p><code>GET &lt;account-group&gt;/api/v2/deposit?asset=&lt;asset&gt;</code></p>

<p><strong>Authentication</strong></p>

<p>You must have view permission enabled for the API key.</p>

<p>You must sign message <code>&lt;timestamp&gt;+deposit</code> and included the signature in the header.</p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>String</td>
<td>Asset code, e.g. <code>&quot;BTC&quot;</code></td>
</tr>
</tbody></table>
<h1 id='restful-apis-margin-trading'>RESTful APIs - Margin Trading</h1>
<p>A margin account allows you to increase your purchasing power beyond the account total balance by borrowing assets. Compare to cash trading, 
margin trading has more complicated trading rules and may carry much greater risks. Please refer to 
<a href="https://bitmaxhelp.zendesk.com/hc/en-us/articles/360016415774-BitMax-io-Margin-Trading-Rules">BitMax.io Margin Trading Rules</a> for more details. </p>
<h2 id='get-balance-of-one-asset-of-the-margin-account'>Get Balance of one Asset of the Margin Account</h2>
<p><a href="https://github.com/bitmax-exchange/api-doc/blob/master/bitmax-api-doc-v1.2.md#get-balance-of-one-asset-of-the-margin-account-api_pathmarginbalance">Margin Balance - Single Balance V1</a></p>
<h2 id='list-all-balance-of-the-margin-account'>List all Balance of the Margin Account</h2>
<p><a href="https://github.com/bitmax-exchange/api-doc/blob/master/bitmax-api-doc-v1.2.md#list-all-balances-of-the-margin-account-api_pathmarginbalance">Margin Balance - All V1</a></p>
<h2 id='get-risk-summary-of-one-symbol-of-the-margin-account'>Get Risk(Summary) of one Symbol of the Margin Account</h2>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"totalBalanceInUSDT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111300.232045955"</span><span class="p">,</span><span class="w">             </span><span class="err">//Total</span><span class="w"> </span><span class="err">Asset</span><span class="w"> </span><span class="err">(in</span><span class="w"> </span><span class="err">USDT)</span><span class="w">
    </span><span class="s2">"netBalanceInUSDT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"106348.644635388"</span><span class="p">,</span><span class="w">               </span><span class="err">//Net</span><span class="w"> </span><span class="err">Asset</span><span class="w"> </span><span class="err">(in</span><span class="w"> </span><span class="err">USDT)</span><span class="w">
    </span><span class="s2">"effectiveInitialMargin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"551.54026784"</span><span class="p">,</span><span class="w">             </span><span class="err">//Init.</span><span class="w"> </span><span class="err">Margin</span><span class="w"> </span><span class="err">Req.</span><span class="w">
    </span><span class="s2">"effectiveMaintenanceMargin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"261.184132719"</span><span class="p">,</span><span class="w">        </span><span class="err">//Min</span><span class="w"> </span><span class="err">Margin</span><span class="w"> </span><span class="err">Req.</span><span class="w">
    </span><span class="s2">"currentLeverage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0466"</span><span class="p">,</span><span class="w">                          </span><span class="err">//Current</span><span class="w"> </span><span class="err">Leverage</span><span class="w">
    </span><span class="s2">"accountMaxLeverage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">                           </span><span class="err">//Maximum</span><span class="w"> </span><span class="err">Leverage</span><span class="w">
    </span><span class="s2">"cushion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">                                     </span><span class="err">//Cushion</span><span class="w"> </span><span class="err">Rate</span><span class="w">
    </span><span class="s2">"pointsBalance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.466680936"</span><span class="w">                        </span><span class="err">//Available(Pts)</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx@xxx.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">submitted</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">server</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>HTTP Request</strong></p>

<p><code>GET &lt;account-group&gt;/api/v2/margin/risk?symbol=&lt;symbol&gt;</code></p>

<p><strong>Authentication</strong></p>

<p>You must have view permission enabled for the API key.</p>

<p>You must sign message <code>&lt;timestamp&gt;+margin/risk</code> and included the signature in the header.</p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>String</td>
<td>symbol, e.g. <code>&quot;BTC/USDT&quot;</code></td>
</tr>
</tbody></table>
<h2 id='transfer-asset-from-cash-account-to-margin-account'>Transfer Asset from Cash Account to Margin Account</h2>
<blockquote>
<p>Request Body - Transfer Asset from Cash Account to Margin Account</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"asset"</span><span class="p">:</span><span class="w">  </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ftWU30JpY08Eu8MwmfYPzUX47QkUtsys"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx@xxx.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">submitted</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">server</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>HTTP Request</strong></p>

<p><code>POST &lt;account-group&gt;/api/v2/margin/transfer/deposit</code></p>

<p><strong>Authentication</strong></p>

<p>You must have transfer permission enabled for the API key.</p>

<p>You must sign message <code>&lt;timestamp&gt;+margin/transfer/deposit</code> and included the signature in the header.</p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>String</td>
<td>Asset code, e.g. <code>&quot;BTC&quot;</code></td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>The amount to transfer in string format</td>
</tr>
</tbody></table>
<h2 id='transfer-asset-from-margin-account-to-cash-account'>Transfer Asset from Margin Account to Cash Account</h2>
<blockquote>
<p>Request Body - Transfer Asset from Margin Account to Cash Account</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"asset"</span><span class="p">:</span><span class="w">  </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"requestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L00HCI4uUQvFLFpguNC8B9zWANGZsJKV"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxx@xxx.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">been</span><span class="w"> </span><span class="err">submitted</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">server</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>HTTP Request</strong></p>

<p><code>POST &lt;account-group&gt;/api/v2/margin/transfer/withdraw</code></p>

<p><strong>Authentication</strong></p>

<p>You must have transfer permission enabled for the API key.</p>

<p>You must sign message <code>&lt;timestamp&gt;+margin/transfer/withdraw</code> and included the signature in the header.</p>

<p><strong>Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>asset</td>
<td>String</td>
<td>Asset code, e.g. <code>&quot;BTC&quot;</code></td>
</tr>
<tr>
<td>amount</td>
<td>String</td>
<td>The amount to transfer in string format</td>
</tr>
</tbody></table>
<h1 id='websocket-api-beta-version'>WebSocket API (Beta Version)</h1><h2 id='websocket-data-feed'>WebSocket Data Feed</h2>
<blockquote>
<p>websocket URL examples:</p>
</blockquote>
<pre class="highlight plaintext"><code>wss://bitmax.io/3/api/stream/cash-beta/ETH-BTC
wss://bitmax.io/3/api/stream/margin-beta/ETH-BTC
</code></pre>
<p><strong>WebSocket URL</strong></p>

<ul>
<li>cash trading: <code>wss://bitmax.io/&lt;account-group&gt;/api/stream/cash-beta/&lt;symbol&gt;</code></li>
<li>margin trading:  <code>wss://bitmax.io/&lt;account-group&gt;/api/stream/margin-beta/&lt;symbol&gt;</code></li>
</ul>

<p>Note: <code>&lt;symbol&gt;</code> in URLs above must be seperated by hyphen (<code>-</code>), e.g, <code>ETH-BTC</code>. Symbols separated by slash (<code>/</code>) are not allowed. </p>

<p><strong>Authorization</strong></p>

<p>You must have view permission enabled for your API key to open websocket connection. If you want to place orders, you will need trade 
permission enabled as well.</p>

<p>You must sign the following messages and included the signature in the header:</p>

<ul>
<li>cash trading: <code>&lt;timestamp&gt;+stream/cash-beta</code></li>
<li>margin trading: <code>&lt;timestamp&gt;+stream/margin-beta</code></li>
</ul>
<h3 id='websocket-authentication'>WebSocket Authentication</h3>
<p>Connecting to websocket API follows almost the same authentication process as authenticated RESTful APIs. You need to include the following
fields in the request header:</p>

<ul>
<li><code>x-auth-key</code> - the API key with view permission. Trade permission is needed if you want to place orders.</li>
<li><code>x-auth-signature</code> - the request signature.</li>
<li><code>x-auth-timestamp</code> - the current UTC timestamp in milliseconds.</li>
</ul>
<h3 id='subscribe-to-websocket-streams'>Subscribe to WebSocket Streams</h3>
<p>After connecting to websocket, you need to send an <code>subscribe</code> message to start receiving data. (Note that unlike V1, you will not receive any data unless you sent the <code>subscribe</code> in V2) The subscribe message is a JSON object 
in plain text format and contains the following fields:</p>

<blockquote>
<p>Subscribe Message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"messageType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"marketDepthLevel"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
  </span><span class="s2">"recentTradeMaxCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
  </span><span class="s2">"skipSummary"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"skipBars"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>messageType</code></td>
<td>String</td>
<td>set this field to <code>subscribe</code> in the subscribe message.</td>
</tr>
<tr>
<td><code>marketDepthLevel</code></td>
<td>Integer</td>
<td>optional, default value 20. This field specifies the max number of price levels on each side to be included in the first market depth message.</td>
</tr>
<tr>
<td><code>recentTradeMaxCount</code></td>
<td>Integer</td>
<td>optional, default value 20. This field specifies the max number of recent trades to be included in the first market trades message.</td>
</tr>
<tr>
<td><code>skipSummary</code></td>
<td>Boolean</td>
<td>optional, default value <code>false</code>. If <code>false</code>, client will receive market summary data with rolling 24 hour O/H/L/C price data for all symbols every 30 seconds.</td>
</tr>
<tr>
<td><code>skipBars</code></td>
<td>Boolean</td>
<td>optional, default value <code>false</code>. If <code>false</code>, client will receive bar data of all frequencies (1 minute, 5 minutes, etc.) for the current symbol every 30 seconds.</td>
</tr>
</tbody></table>

<p>After sending <code>subscribe</code> message, you will receive a message indicating the subscription is successful or not. </p>

<blockquote>
<p>Success Subscribe Message (Success Response)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
</span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Field Name</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>m</code></td>
<td>String</td>
<td><code>subscribe</code> if the subscription succeeds, <code>error</code> if it fails</td>
</tr>
<tr>
<td><code>msg</code></td>
<td>String</td>
<td><code>success</code> if the subscrioption succeeds, or it will print out the error message</td>
</tr>
</tbody></table>
<h2 id='websocket-for-cash-trading'>WebSocket for Cash Trading</h2>
<aside class="notice">This API is in beta version and is subject to change. </aside>

<p><strong>WebSocket URL</strong></p>

<p><code>wss://bitmax.io/&lt;account-group&gt;/api/stream/cash-beta/&lt;symbol&gt;</code></p>
<h3 id='data-channel-market-depth'>Data Channel - Market Depth</h3>
<blockquote>
<p>Market Depth Data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"m"</span><span class="p">:</span><span class="w">      </span><span class="s2">"depth"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"s"</span><span class="p">:</span><span class="w">      </span><span class="s2">"ETH/BTC"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"ts"</span><span class="p">:</span><span class="w">     </span><span class="mi">1557422548511</span><span class="p">,</span><span class="w">
   </span><span class="s2">"seqnum"</span><span class="p">:</span><span class="w"> </span><span class="mi">604599926</span><span class="p">,</span><span class="w">
   </span><span class="s2">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="p">[</span><span class="s2">"13.45"</span><span class="p">,</span><span class="w"> </span><span class="s2">"59.16"</span><span class="p">],</span><span class="w">
       </span><span class="p">[</span><span class="s2">"13.37"</span><span class="p">,</span><span class="w"> </span><span class="s2">"95.04"</span><span class="p">],</span><span class="w">   
       </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="p">[</span><span class="s2">"13.21"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60.17"</span><span class="p">],</span><span class="w">
       </span><span class="p">[</span><span class="s2">"13.10"</span><span class="p">,</span><span class="w"> </span><span class="s2">"13.39"</span><span class="p">],</span><span class="w">
       </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Each market depth message is a JSON object containing the current quantity at specific prices levels. There is no direct way of getting the top-of-the-book data through websocket. 
You need to maintain the current depth book and derive the best bid/ask. This can be done by two steps:</p>

<ul>
<li>Use the first depth message to build the initial depth book.</li>
<li>Use later messages to update the depth book. Messages contain the new total size at the indicated price level. 
You should replace the old quantity using message received. When the replacement quantity is zero, it means there 
is no order sitting on the corresponding price level.</li>
</ul>

<p>Each market depth message contains the following field:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>m</code></td>
<td>String</td>
<td>message type, <code>&quot;depth&quot;</code></td>
</tr>
<tr>
<td><code>s</code></td>
<td>String</td>
<td>symbol</td>
</tr>
<tr>
<td><code>ts</code></td>
<td>Long</td>
<td>timestamp when the message is generated</td>
</tr>
<tr>
<td><code>seqnum</code></td>
<td>Long</td>
<td>sequence number</td>
</tr>
<tr>
<td><code>asks</code></td>
<td>Sequence</td>
<td>ask levels, each element in the sequence contains <code>[price, quantity]</code>. <code>price</code> and <code>quantity</code> are of String type.</td>
</tr>
<tr>
<td><code>bids</code></td>
<td>Sequence</td>
<td>bid levels</td>
</tr>
</tbody></table>
<h3 id='data-channel-market-trades'>Data Channel - Market Trades</h3>
<blockquote>
<p>Market Trades Data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w"> </span><span class="s2">"marketTrades"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"s"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH/BTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"p"</span><span class="p">:</span><span class="w">  </span><span class="s2">"13.75"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"q"</span><span class="p">:</span><span class="w">  </span><span class="s2">"6.68"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"t"</span><span class="p">:</span><span class="w">  </span><span class="mi">1528988084944</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bm"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"p"</span><span class="p">:</span><span class="w">  </span><span class="s2">"13.75"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"q"</span><span class="p">:</span><span class="w">  </span><span class="s2">"6.68"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"t"</span><span class="p">:</span><span class="w">  </span><span class="mi">1528988084944</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bm"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Each start receiving continuous market trade stream. All market trades messages follow the same structure, which contains one or more trades.</p>

<p>Each market depth message contains the following field:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>m</code></td>
<td>String</td>
<td>message type, <code>&quot;marketTrades&quot;</code></td>
</tr>
<tr>
<td><code>s</code></td>
<td>String</td>
<td>symbol</td>
</tr>
<tr>
<td><code>trades</code></td>
<td>Sequence</td>
<td>List of objects containing recent trade data (see below)</td>
</tr>
</tbody></table>

<p>Each element in <code>trades</code> is an object containing recent trade data with the following fields:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>p</code></td>
<td>String</td>
<td>price</td>
</tr>
<tr>
<td><code>q</code></td>
<td>String</td>
<td>quantity</td>
</tr>
<tr>
<td><code>t</code></td>
<td>Long</td>
<td>timestamp</td>
</tr>
<tr>
<td><code>bm</code></td>
<td>Boolean</td>
<td>if <code>true</code>, the buyer of the trade is the market maker</td>
</tr>
</tbody></table>
<h3 id='data-channel-market-summary'>Data Channel - Market Summary</h3>
<blockquote>
<p>Market Summary Data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w">  </span><span class="s2">"summary"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"s"</span><span class="p">:</span><span class="w">  </span><span class="s2">"ETH/BTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"qa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"i"</span><span class="p">:</span><span class="w">  </span><span class="s2">"1d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"t"</span><span class="p">:</span><span class="w">  </span><span class="mi">1528988000000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"o"</span><span class="p">:</span><span class="w">  </span><span class="s2">"3.24"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"c"</span><span class="p">:</span><span class="w">  </span><span class="s2">"3.56"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"h"</span><span class="p">:</span><span class="w">  </span><span class="s2">"3.77"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"l"</span><span class="p">:</span><span class="w">  </span><span class="s2">"3.21"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"v"</span><span class="p">:</span><span class="w">  </span><span class="s2">"10.234"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Each market summary data record contains current information about a single product. The data is streamed in batches - we stream out market data of all products every 30 seconds. Set <code>skipSummary = true</code> 
in the subscribe message to turn it on.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>m</code></td>
<td>String</td>
<td>&quot;summary&quot;</td>
</tr>
<tr>
<td><code>s</code></td>
<td>String</td>
<td>product symbol</td>
</tr>
<tr>
<td><code>ba</code></td>
<td>String</td>
<td>base asset</td>
</tr>
<tr>
<td><code>qa</code></td>
<td>String</td>
<td>quote asset</td>
</tr>
<tr>
<td><code>i</code></td>
<td>String</td>
<td>bar interval, for market summary data, the interval is always <code>1d</code></td>
</tr>
<tr>
<td><code>t</code></td>
<td>Long</td>
<td>UTC timestamp in milliseconds</td>
</tr>
<tr>
<td><code>o</code></td>
<td>String</td>
<td>open</td>
</tr>
<tr>
<td><code>c</code></td>
<td>String</td>
<td>close</td>
</tr>
<tr>
<td><code>h</code></td>
<td>String</td>
<td>high</td>
</tr>
<tr>
<td><code>l</code></td>
<td>String</td>
<td>low</td>
</tr>
<tr>
<td><code>v</code></td>
<td>String</td>
<td>volume</td>
</tr>
</tbody></table>
<h3 id='data-channel-bar-data'>Data Channel - Bar Data</h3>
<blockquote>
<p>Bar Chart Data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w">  </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"s"</span><span class="p">:</span><span class="w">  </span><span class="s2">"ETH/BTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"qa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"i"</span><span class="p">:</span><span class="w">  </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"t"</span><span class="p">:</span><span class="w">  </span><span class="mi">1528988500000</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"o"</span><span class="p">:</span><span class="w">  </span><span class="s2">"3.24"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"c"</span><span class="p">:</span><span class="w">  </span><span class="s2">"3.56"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"h"</span><span class="p">:</span><span class="w">  </span><span class="s2">"3.77"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"l"</span><span class="p">:</span><span class="w">  </span><span class="s2">"3.21"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"v"</span><span class="p">:</span><span class="w">  </span><span class="s2">"10.234"</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Bar data is almost the same as the market summary data, except that:</p>

<p>Message type is bar
There is only one symbol per websocket session
The interval field i may take multiple values: 1, 5, 30, 160, 360, 1d.
We stream bar data in batches. Every 30 seconds, we stream bar data messages at all interval levels. You may use these data to update bar chart directly (replace bars). However, you should also update the bar chart using the market trade messages.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>m</code></td>
<td>String</td>
<td><code>&quot;bar&quot;</code></td>
</tr>
<tr>
<td><code>s</code></td>
<td>String</td>
<td>symbol, e.g. <code>&quot;BTC/USDT&quot;</code></td>
</tr>
<tr>
<td><code>ba</code></td>
<td>String</td>
<td>base asset</td>
</tr>
<tr>
<td><code>qa</code></td>
<td>String</td>
<td>quote asset</td>
</tr>
<tr>
<td><code>i</code></td>
<td>String</td>
<td>bar interval, e.g. <code>&quot;1&quot;, &quot;5&quot;, &quot;30&quot;, &quot;60&quot;, &quot;360&quot;, &quot;1d&quot;</code></td>
</tr>
<tr>
<td><code>t</code></td>
<td>Long</td>
<td>UTC timestamp in milliseconds</td>
</tr>
<tr>
<td><code>o</code></td>
<td>String</td>
<td>open</td>
</tr>
<tr>
<td><code>c</code></td>
<td>String</td>
<td>close</td>
</tr>
<tr>
<td><code>h</code></td>
<td>String</td>
<td>high</td>
</tr>
<tr>
<td><code>l</code></td>
<td>String</td>
<td>low</td>
</tr>
<tr>
<td><code>v</code></td>
<td>String</td>
<td>volume</td>
</tr>
</tbody></table>
<h3 id='data-channel-order-updates'>Data Channel - Order Updates</h3>
<blockquote>
<p>Order Update Data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w">           </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"execId"</span><span class="p">:</span><span class="w">      </span><span class="s2">"31137230"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"coid"</span><span class="p">:</span><span class="w">        </span><span class="s2">"FCmKQLPtKb7ciJitM0TSj9f5oLysa1iW"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w">   </span><span class="s2">"Limit"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"s"</span><span class="p">:</span><span class="w">           </span><span class="s2">"BTC/USDT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"t"</span><span class="p">:</span><span class="w">           </span><span class="mi">1565200977389</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"p"</span><span class="p">:</span><span class="w">           </span><span class="s2">"11000.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"q"</span><span class="p">:</span><span class="w">           </span><span class="s2">"1.0000000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"l"</span><span class="p">:</span><span class="w">           </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lp"</span><span class="p">:</span><span class="w">          </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"f"</span><span class="p">:</span><span class="w">           </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ap"</span><span class="p">:</span><span class="w">          </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bb"</span><span class="p">:</span><span class="w">          </span><span class="s2">"1000.497910329"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bpb"</span><span class="p">:</span><span class="w">         </span><span class="s2">"1000.497910329"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"qb"</span><span class="p">:</span><span class="w">          </span><span class="s2">"188504.592479229"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"qpb"</span><span class="p">:</span><span class="w">         </span><span class="s2">"177493.592479229"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fee"</span><span class="p">:</span><span class="w">         </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fa"</span><span class="p">:</span><span class="w">          </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bc"</span><span class="p">:</span><span class="w">          </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"btmxBal"</span><span class="p">:</span><span class="w">     </span><span class="s2">"1912.000000000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"side"</span><span class="p">:</span><span class="w">        </span><span class="s2">"Buy"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w">      </span><span class="s2">"New"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"errorCode"</span><span class="p">:</span><span class="w">   </span><span class="s2">"NULL_VAL"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cat"</span><span class="p">:</span><span class="w">         </span><span class="s2">"CASH"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ei"</span><span class="p">:</span><span class="w">          </span><span class="s2">"NULL_VAL"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Once connected to websocket streams, you will start receiving real time updates of <strong>all</strong> your own orders (not only the orders of the subscribtion symbol). It contains both order execution report and current balances. 
Since only new order updates will be streamed, it is recommendated that you load the initial snap of all you orders using the <a href="https://github.com/bitmax-exchange/api-doc/blob/master/bitmax-api-doc-v1.2.md#list-of-all-open-orders">RESTful API GET api/v1/order/open</a>. <strong>Note that if you only connect to cash trading web socket, you won&#39;t receive order update messages of your margin account and vice versa.</strong></p>

<table><thead>
<tr>
<th>Field</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>m</code></td>
<td>String</td>
<td><code>&quot;order&quot;</code></td>
</tr>
<tr>
<td><code>execId</code></td>
<td>String</td>
<td>for each user, this is a strictly increasing long integer</td>
</tr>
<tr>
<td><code>coid</code></td>
<td>String</td>
<td>client order id</td>
</tr>
<tr>
<td><code>origCoid</code></td>
<td>String</td>
<td>optional, the original order id, see canceling orders for more details</td>
</tr>
<tr>
<td><code>orderType</code></td>
<td>String</td>
<td><code>&quot;Limit&quot;, &quot;Market&quot;, &quot;StopLimit&quot;, &quot;StopMarket&quot;</code></td>
</tr>
<tr>
<td><code>s</code></td>
<td>String</td>
<td>symbol, e.g. <code>&quot;BTC/USDT&quot;</code></td>
</tr>
<tr>
<td><code>t</code></td>
<td>Long</td>
<td>UTC timestamp in milliseconds</td>
</tr>
<tr>
<td><code>p</code></td>
<td>String</td>
<td>optional, limit price, only available for <code>&quot;Limit&quot;</code> and <code>&quot;StopLimit&quot;</code> orders</td>
</tr>
<tr>
<td><code>sp</code></td>
<td>String</td>
<td>optional, stop price, only available for stop market and stop limit orders</td>
</tr>
<tr>
<td><code>q</code></td>
<td>String</td>
<td>order quantity</td>
</tr>
<tr>
<td><code>l</code></td>
<td>String</td>
<td>last quantity, the quantity executed by the last fill</td>
</tr>
<tr>
<td><code>lp</code></td>
<td>String</td>
<td>last price, the price executed by the last fill</td>
</tr>
<tr>
<td><code>f</code></td>
<td>String</td>
<td>filled quantity, this is the aggregated quantity executed by all past fills</td>
</tr>
<tr>
<td><code>ap</code></td>
<td>String</td>
<td>average filled price</td>
</tr>
<tr>
<td><code>bb</code></td>
<td>String</td>
<td>base asset total balance</td>
</tr>
<tr>
<td><code>bpb</code></td>
<td>String</td>
<td>base asset available balance</td>
</tr>
<tr>
<td><code>qb</code></td>
<td>String</td>
<td>quote asset total balance</td>
</tr>
<tr>
<td><code>qpb</code></td>
<td>String</td>
<td>quote asset available balance</td>
</tr>
<tr>
<td><code>fee</code></td>
<td>String</td>
<td>fee</td>
</tr>
<tr>
<td><code>fa</code></td>
<td>String</td>
<td>fee asset</td>
</tr>
<tr>
<td><code>bc</code></td>
<td>String</td>
<td>if possitive, this is the BTMX commission charged by reverse mining, if negative, this is the mining output of the current fill.</td>
</tr>
<tr>
<td><code>btmxBal</code></td>
<td>String</td>
<td>optional, the BTMX balance of the current account.</td>
</tr>
<tr>
<td><code>side</code></td>
<td>String</td>
<td>side</td>
</tr>
<tr>
<td><code>status</code></td>
<td>String</td>
<td>order status</td>
</tr>
<tr>
<td><code>errorCode</code></td>
<td>String</td>
<td>if the order is rejected, this field explains why</td>
</tr>
<tr>
<td><code>cat</code></td>
<td>String</td>
<td>category</td>
</tr>
<tr>
<td><code>ei</code></td>
<td>String</td>
<td>execution instruction, <code>&quot;POST&quot;</code> for post-only orders</td>
</tr>
</tbody></table>
<h3 id='data-channel-balance-updates'>Data Channel - Balance Updates</h3>
<blockquote>
<p>Balance Update Data</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w">  </span><span class="s2">"balance"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"execId"</span><span class="p">:</span><span class="w">  </span><span class="s2">"31428578"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cshnHfBk4eytjL23VBZ0mRTY2Dre6Tcr"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"a"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"b"</span><span class="p">:</span><span class="w">  </span><span class="s2">"177718.014527793"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pb"</span><span class="p">:</span><span class="w">  </span><span class="s2">"166707.014527793"</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Once connected to websocket streams, you will start receiving real time balance updates. Trade related balance updates will be included in the order update message, all other updates (deposit/withdraw/transfer between cash and margin accounts, etc) will be included in the balance message.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>m</code></td>
<td>String</td>
<td><code>&quot;balance&quot;</code></td>
</tr>
<tr>
<td><code>execId</code></td>
<td>String</td>
<td>for each user, this is a strictly increasing long integer</td>
</tr>
<tr>
<td><code>account</code></td>
<td>String</td>
<td>account ID</td>
</tr>
<tr>
<td><code>a</code></td>
<td>String</td>
<td>asset</td>
</tr>
<tr>
<td><code>b</code></td>
<td>String</td>
<td>total balance of the asset</td>
</tr>
<tr>
<td><code>pb</code></td>
<td>String</td>
<td>available balance of the asset</td>
</tr>
</tbody></table>
<h3 id='client-request-placing-new-order'>Client Request - Placing New Order</h3>
<blockquote>
<p>New Order Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"messageType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newOrderRequest"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time"</span><span class="p">:</span><span class="w">        </span><span class="mi">1528988500000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"coid"</span><span class="p">:</span><span class="w">        </span><span class="s2">"G4afqeetOz34Wh4SqtJUye6vpYqhe7TH"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">      </span><span class="s2">"BTC/USDT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orderPrice"</span><span class="p">:</span><span class="w">  </span><span class="s2">"5000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orderQty"</span><span class="p">:</span><span class="w">    </span><span class="s2">"0.35"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orderType"</span><span class="p">:</span><span class="w">   </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"side"</span><span class="p">:</span><span class="w">        </span><span class="s2">"buy"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can place orders by sending <code>newOrderRequest</code> messages to the server.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Data Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td><code>messageType</code></td>
<td>String</td>
<td>required, <code>&quot;newOrderRequest&quot;</code></td>
</tr>
<tr>
<td><code>time</code></td>
<td>Long</td>
<td>required, UTC timestamp in milliseconds</td>
</tr>
<tr>
<td><code>coid</code></td>
<td>String</td>
<td>required, unique ID string of length 32</td>
</tr>
<tr>
<td><code>symbol</code></td>
<td>String</td>
<td>required, symbol, e.g. <code>&quot;BTC/USDT&quot;</code></td>
</tr>
<tr>
<td><code>orderPrice</code></td>
<td>String</td>
<td>optional, the limit price of the order</td>
</tr>
<tr>
<td><code>orderQty</code></td>
<td>String</td>
<td>required, the order quantity as a string, e.g. &quot;1.23&quot;</td>
</tr>
<tr>
<td><code>orderType</code></td>
<td>String</td>
<td>required, <code>&quot;limie&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td><code>side</code></td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><code>postOnly</code></td>
<td>Boolean</td>
<td>Optional, <code>true</code> or <code>false</code></td>
</tr>
<tr>
<td><code>stopPrice</code></td>
<td>String</td>
<td>the stop price as a string, e.g <code>&quot;10000.50&quot;</code></td>
</tr>
<tr>
<td><code>timeInForce</code></td>
<td>String</td>
<td><code>GTC</code> (Good-till-canceled, default) or <code>IOC</code> (immediate-or-cancel)</td>
</tr>
</tbody></table>

<blockquote>
<p>Invalid Order Rejection Message</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w">         </span><span class="s2">"order"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"coid"</span><span class="p">:</span><span class="w">      </span><span class="s2">"G4afqeetOz34Wh4SqtJUye6vpYqhe7TH"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w">    </span><span class="s2">"Rejected"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"errorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"600533"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reason"</span><span class="p">:</span><span class="w">    </span><span class="s2">"Price is too low from market price."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>If the order is valid, you will receive an <a href="#data-channel-order-updates">order update message</a> in which <code>Status</code> is <code>New</code>.</p>

<p>If the order is invalid, you will receive an rejection message immediately with <code>coid</code> the same as the new order request message. </p>

<table><thead>
<tr>
<th>Key</th>
<th>Data Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td><code>m</code></td>
<td>String</td>
<td><code>&quot;order&quot;</code></td>
</tr>
<tr>
<td><code>coid</code></td>
<td>String</td>
<td>the <code>coid</code> in the order request</td>
</tr>
<tr>
<td><code>status</code></td>
<td>String</td>
<td><code>&quot;Rejected&quot;</code></td>
</tr>
<tr>
<td><code>errorCode</code></td>
<td>String</td>
<td>a numeric error code as a string. (We use string format to be consistent with other order messages)</td>
</tr>
<tr>
<td><code>reason</code></td>
<td>String</td>
<td></td>
</tr>
</tbody></table>
<h3 id='client-request-cancel-an-order'>Client Request - Cancel an Order</h3>
<blockquote>
<p>Cancel an Order</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"messageType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelOrderRequest"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time"</span><span class="p">:</span><span class="w">        </span><span class="mi">1528988100000</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"coid"</span><span class="p">:</span><span class="w">        </span><span class="s2">"Zgu7EabVbGNnnGsCid0MydDA4pa7ighE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"origCoid"</span><span class="p">:</span><span class="w">    </span><span class="s2">"dHKTlw3Mh4W4Zg9RjkU5cnFopwjC9uWU"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"symbol"</span><span class="p">:</span><span class="w">      </span><span class="s2">"BTC/USDT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You can cancel an open order by sending <code>cancelOrderRequest</code> messages to the server. If the order is successfully canceled, you will receive an <a href="#data-channel-order-updates">order update message</a> in which <code>Status</code> is <code>Canceled</code>.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Data Type</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td><code>messageType</code></td>
<td>String</td>
<td>required, <code>&quot;cancelOrderRequest&quot;</code></td>
</tr>
<tr>
<td><code>time</code></td>
<td>Long</td>
<td>required, UTC timestamp in milliseconds</td>
</tr>
<tr>
<td><code>coid</code></td>
<td>String</td>
<td>required, unique ID string of length 32</td>
</tr>
<tr>
<td><code>origCoid</code></td>
<td>String</td>
<td>required, the original <code>coid</code> of the order</td>
</tr>
<tr>
<td><code>symbol</code></td>
<td>String</td>
<td>required, symbol, e.g. <code>&quot;BTC/USDT&quot;</code></td>
</tr>
</tbody></table>
<h2 id='websocket-for-margin-trading'>WebSocket for Margin Trading</h2>
<aside class="notice">This API is in beta version and is subject to change. </aside>

<p><strong>WebSocket URL</strong></p>

<p><code>wss://bitmax.io/&lt;account-group&gt;/api/stream/margin-beta/&lt;symbol&gt;</code></p>
<h3 id='data-channel-market-depth'>Data Channel - Market Depth</h3>
<p>See <a href="#data-channel-market-depth">cash trading market depth</a></p>
<h3 id='data-channel-market-trades'>Data Channel - Market Trades</h3>
<p>See <a href="#data-channel-market-trades">cash trading market trades</a></p>
<h3 id='data-channel-market-summary'>Data Channel - Market Summary</h3>
<p>See <a href="#data-channel-market-summary">cash trading market summary</a></p>
<h3 id='data-channel-bar-data'>Data Channel - Bar Data</h3>
<p>See <a href="#data-channel-market-bar">cash trading market bar data</a></p>
<h3 id='data-channel-reference-prices'>Data Channel - Reference Prices</h3>
<blockquote>
<p>Reference Prices</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="w">  </span><span class="s2">"ref-px"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">message</span><span class="w">
  </span><span class="s2">"ba"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XRP"</span><span class="p">,</span><span class="w">     </span><span class="err">//</span><span class="w"> </span><span class="err">base</span><span class="w"> </span><span class="err">asset</span><span class="w">
  </span><span class="s2">"qa"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">    </span><span class="err">//</span><span class="w"> </span><span class="err">quote</span><span class="w"> </span><span class="err">asset</span><span class="w">
  </span><span class="s2">"p"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.3406"</span><span class="w">   </span><span class="err">//</span><span class="w"> </span><span class="err">price</span><span class="w"> 
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Reference prices are composite price indices for the calculation of margin requirement and forced liquidation. 
The reference price is computed by taking an average last trade price from the following five exchanges (upon 
availability at the time of computation) - BitMax.io, Binance, Huobi, OKEx and Poloniex , and removing the 
highest and lowest price. </p>

<p>BitMax.io reserves the right of updating pricing sources without notice.</p>

<p>The server sends out <code>ref-px</code> message every 10 seconds.</p>
<h3 id='data-channel-order-updates'>Data Channel - Order Updates</h3>
<p>See <a href="#data-channel-order-updates">cash trading order updates</a></p>
<h3 id='data-channel-margin-summary'>Data Channel - Margin Summary</h3>
<blockquote>
<p>Margin Summary</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="s2">"margin-summary"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">message</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"b"</span><span class="p">:</span><span class="w">   </span><span class="s2">"100000"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">total</span><span class="w"> </span><span class="err">balance</span><span class="w">
    </span><span class="s2">"pb"</span><span class="p">:</span><span class="w">  </span><span class="s2">"99499.5"</span><span class="p">,</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">(available)</span><span class="w"> </span><span class="err">balance</span><span class="w"> 
    </span><span class="s2">"nb"</span><span class="p">:</span><span class="w">  </span><span class="s2">"100000"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">net</span><span class="w"> </span><span class="err">asset</span><span class="w">  
    </span><span class="s2">"eim"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">effective</span><span class="w"> </span><span class="err">initial</span><span class="w"> </span><span class="err">margin</span><span class="w">
    </span><span class="s2">"emm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">effective</span><span class="w"> </span><span class="err">maintanence</span><span class="w"> </span><span class="err">margin</span><span class="w">
    </span><span class="s2">"clv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">current</span><span class="w"> </span><span class="err">leverage</span><span class="w">
    </span><span class="s2">"ilv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.0303"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">deprecated</span><span class="p">,</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">removed</span><span class="w"> </span><span class="err">shortly</span><span class="w">
    </span><span class="s2">"alv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">account</span><span class="w"> </span><span class="err">maximum</span><span class="w"> </span><span class="err">leverage</span><span class="w">
    </span><span class="s2">"cus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-1"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">cusion</span><span class="w"> </span><span class="err">rate</span><span class="w">
    </span><span class="s2">"pts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"346"</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">point</span><span class="w"> </span><span class="err">card</span><span class="w"> </span><span class="err">balance</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The <code>margin-summary</code> message contains risk metrics of the overall account. It is important to monitor the risk metrics closely and adjust your positions accordingly 
to avoid forced account liquidation. </p>

<ul>
<li><code>b</code> - account&#39;s overall total asset value in USDT calculated based on constituent assets&#39; reference prices. </li>
<li><code>pb</code> - account&#39;s overall pending (available) asset value in USDT.</li>
<li><code>nb</code> - account&#39;s  overall net asset value, which is calculated as <strong>total asset value - total borrowed amount - total interest owed</strong>, based on USDT value. </li>
<li><code>eim</code> - effective initial margin. </li>
<li><code>emm</code> - effective maintanence margin.</li>
<li><code>clv</code> - current leverage. If the net asset value is positive, <code>clv</code> is defined as the ratio of total asset value and net asset value; if the net asset value is zero or negative, <code>clv</code> is set to be -1 (undefined).</li>
<li><code>ilv</code> - this field is <strong>deprecated</strong>, it will be removed shortly.</li>
<li><code>alv</code> - account leverage, the maximum leverage allowed for the current account. This value may increase / decrease based on the account&#39;s net asset value</li>
<li><code>cus</code> - cushion rate, defined as the the ratio of <strong>net asset value</strong> over <strong>effective maintanence margin</strong> if both values are positive. Otherwise, <code>cus</code> is set to be -1 (undefined). 
If cushion rate is defined but below 1, your account could be liquidated at any time. </li>
<li><code>pts</code> - the total balance of your point card for margin interest repayment. </li>
</ul>

<p>The server emits the <code>margin-summary</code> message along with reference prices updates. </p>
<h3 id='data-channel-margin-balance'>Data Channel - Margin Balance</h3>
<blockquote>
<p>Margin Balance</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"m"</span><span class="p">:</span><span class="s2">"margin-balance"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"baseAsset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"a"</span><span class="p">:</span><span class="w">  </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">         </span><span class="err">//</span><span class="w"> </span><span class="err">asset</span><span class="w"> </span><span class="err">code</span><span class="w"> 
      </span><span class="s2">"b"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">total</span><span class="w"> </span><span class="err">balance</span><span class="w">
      </span><span class="s2">"pb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">(available)</span><span class="w"> </span><span class="err">balance</span><span class="w">
      </span><span class="s2">"br"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">borrowed</span><span class="w"> </span><span class="err">amount</span><span class="w">
      </span><span class="s2">"i"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">interest</span><span class="w"> </span><span class="err">owed</span><span class="w">
      </span><span class="s2">"ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">maximum</span><span class="w"> </span><span class="err">sellable</span><span class="w"> </span><span class="err">amount</span><span class="w">
      </span><span class="s2">"r"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.00062"</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">daily</span><span class="w"> </span><span class="err">interest</span><span class="w"> </span><span class="err">rate</span><span class="w"> 
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"quoteAsset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"a"</span><span class="p">:</span><span class="w">  </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">asset</span><span class="w"> </span><span class="err">code</span><span class="w"> 
      </span><span class="s2">"b"</span><span class="p">:</span><span class="w">  </span><span class="s2">"100000"</span><span class="p">,</span><span class="w">      </span><span class="err">//</span><span class="w"> </span><span class="err">total</span><span class="w"> </span><span class="err">balance</span><span class="w">
      </span><span class="s2">"pb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99499.5"</span><span class="p">,</span><span class="w">     </span><span class="err">//</span><span class="w"> </span><span class="err">pending</span><span class="w"> </span><span class="err">(available)</span><span class="w"> </span><span class="err">balance</span><span class="w">
      </span><span class="s2">"br"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">borrowed</span><span class="w"> </span><span class="err">amount</span><span class="w">
      </span><span class="s2">"i"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0"</span><span class="p">,</span><span class="w">           </span><span class="err">//</span><span class="w"> </span><span class="err">interest</span><span class="w"> </span><span class="err">owed</span><span class="w">
      </span><span class="s2">"ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"117109.454"</span><span class="p">,</span><span class="w">  </span><span class="err">//</span><span class="w"> </span><span class="err">maximum</span><span class="w"> </span><span class="err">sellable</span><span class="w"> </span><span class="err">amount</span><span class="w">
      </span><span class="s2">"r"</span><span class="p">:</span><span class="w">  </span><span class="s2">"0.0012"</span><span class="w">       </span><span class="err">//</span><span class="w"> </span><span class="err">daily</span><span class="w"> </span><span class="err">interest</span><span class="w"> </span><span class="err">rate</span><span class="w"> 
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The <code>margin-balance</code> message contains the balance data regarding the current symbol - the symbol specified in the URL of the API call. </p>

<ul>
<li><code>a</code> - asset code</li>
<li><code>b</code> - the asset&#39;s total balance.</li>
<li><code>pb</code> - the asset&#39;s pending (available) balance. You won&#39;t incurr any borrowing if you try to sell a quantity less than <code>pb</code>.</li>
<li><code>br</code> - the asset&#39;s borrowed amount, in most cases, when <code>br</code> is positive, <code>pb</code> should be zero, meaning that in order to sell the asset you must increase borrowing. </li>
<li><code>i</code> - the asset&#39;s total interest owed. </li>
<li><code>ms</code> - the asset&#39;s maximum sellable amount. It usually includes buying power from your available balance and the additional buying power from your account&#39;s borrowing power. </li>
<li><code>r</code> - the asset&#39;s daily interest rate. </li>
</ul>

<p>The server emits the <code>margin-balance</code> message along with reference prices updates. </p>
<h1 id='error-codes'>Error Codes</h1>
<p>(Work in progress)</p>

<table><thead>
<tr>
<th>Code</th>
<th>Message</th>
</tr>
</thead><tbody>
<tr>
<td>1900</td>
<td>Invalid Http Request Input.</td>
</tr>
<tr>
<td>21008</td>
<td>API key does not have transfer permission</td>
</tr>
<tr>
<td>6010</td>
<td>Not enough balance</td>
</tr>
</tbody></table>
<h2 id='faq'>FAQ</h2><h3 id='1900-invalid-http-request-input'>1900 - Invalid Http Request Input.</h3>
<p>This usually happens when numeric values are provided for parameters of string type. 
For instance, when placing new orders, we require both order price and order quantity 
to be strings. You will receive <code>error = 1900</code> if you use numeric value for either of them.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
